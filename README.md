<a href="http://www.twitch.tv/ridgure"><img src="https://pbs.twimg.com/profile_banners/4144666635/1656852039/1500x500" title="FVCproductions" alt="FVCproductions"></a>

<h1 align="center">
  <br>
  <a href="http://www.twitch.tv/ridgure"><img src="https://pbs.twimg.com/profile_images/965416492924891136/N-EvLzcd_400x400.jpg" alt="Markdownify" width="200"></a>
  <br>
  Viewer ratio bot
  <br>
</h1>

<h4 align="center">A bot written in python and made for my Twitch channel <a href="https://twitch.tv/ridgure" target="_blank">Twitch.tv/Ridgure</a>.</h4>
<div align="center">Are you stuck streaming a category on twitch that is completely over saturated? Want to make use of the potential of the viewers that exist on Twitch? Then this is the bot for you. This bot checks how many viewers there are in a category and recommends if this category is good to stream or not.</div>


<p align="center">
  <a href="#key-features">Key Features</a> •
  <a href="#getting-started">Getting started</a> •
  <a href="#acknowledgements">Acknowledgements</a> •
  <a href="#connect">Connect</a>
</p>

## Features:

**Automated functions:**

| Done by the bot automatically:                                            |
|---------------------------------------------------------------------------|
| Checks all the streamed games on Twitch                                   |
| Checks all the streams for those games with the language English or other |
| Checks all the tags for those streams                                     |
| Black/whitelist of streams                                                |
| Black/whitelist of titles for all games or per game                       |
| Black/whitelist of tags                                                   |
| Filters out categories with drops                                         |
| Filters out streams longer than 18 hours                                  |
| Averages out the data over the course of a specified amount of time       |

## Getting started

**Clone**

Clone this repository to your local machine using 
```git clone https://github.com/Ridgure/ViewerRatioBot.git```

**Setup**

In order to be able to run the bot add a file `config.py` in the same folder as the bot and go through the steps below:
`config.py` should look something like this:

```python
Host = "irc.twitch.tv"         # The Twitch IRC server
Port = 6667                    # Always use port 6667!
Nickname = "<Name>"            # Your Twitch username, lowercase
FollowerToken = "<Token>"      # Token generated by twitchapps.com/tmi without the oauth: part
SubscriberToken = "<Token>"    # Self generated token
Channel = "#<Channel>"         # The channel you want to join
ClientID = "<ClientID>"        # Your client ID
```

- Create a Twitch account with the name of your bot
- Register your application on the [Twitch developer site](https://glass.twitch.tv/login)
  - Set the Name to the name of the account you just created
  - Set the redirect uri to `http://localhost`
  - Set the application directory to Chat Bot
  - Agree to the terms and conditions
  - Get a `Client_ID` and a `Client_Secret`
- Generate your token for accessing follower data and chat
  - Go to  [Get token here](twitchapps.com/tmi) and click connect with twitch
  - Click Authorize
  - Your token should look something like this: `oauth:a1b2c3d4e5f6g7h8i9j1k2l3m5n6o7`
- Generate your token for accessing subscriber data
  - Go to the link underneath 
  - Remember to swap out `<clientID>` with your `client id!`
  - Click Authenticate
  - It will look like you got a blank page but your url should look like the second url
  - Your access token is the gibberish where it says Token in the url 

```
https://id.twitch.tv/oauth2/authorize?client_id=<clientID>&redirect_uri=http://localhost&response_type=token&scope=channel_subscriptions+user_read+channel_check_subscription+chat_login
http://localhost/#access_token=<Token>&scope=channel_subscriptions+user_read+channel_check_subscription+chat_login&token_type=bearer
```

**Prerequisites**

You will need to install these things to run the bot

- [Python 3.10.x](https://www.python.org/downloads/)
- Libraries:
  - [Requests](http://docs.python-requests.org/en/master/user/install/)
  
**Running the bot**

Run [bot.py](docs/ViewerRatioBot.py) by going to its location and running this command:

```python
python ViewerRatioBot.py
```

## Acknowledgements:

This whole project started off with this [Instructables article](https://www.instructables.com/id/Twitchtv-Moderator-Bot/)

**Other interesting projects to check out:**

[PythonBot](https://giphertius.wordpress.com/2020/10/17/python-commands/) by ZERG3R on Twitch as [ZERG3R](hhttps://github.com/zrgstudios/twitchbot)

Ponderier by DillonEA on Twitch as [DillonEA](https//:twitch.tv/DillonEA)

[Xekeism](https://www.xekeland.com/) by XekeDeath on Twitch as [XekeDeath](https//:twitch.tv/DillonEA)

## Connect:

**Twitch**

See the bot in action when I am live on [Twitch](https://twitch.tv/ridgure) over at [Twitch.tv/Ridgure](https://twitch.tv/ridgure)

**Social media**

Please follow me on:
[Facebook](https://www.Facebook.com/ridgure), 
[Twitter](https://www.Twitter.com/ridgure) and
[Instagram](https://www.Instagram.com/rigidstructure)
